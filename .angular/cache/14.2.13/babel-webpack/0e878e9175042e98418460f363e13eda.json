{"ast":null,"code":"import { StockDto } from 'src/app/classes/stock-dto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/stock.service\";\nimport * as i2 from \"src/app/services/produit.service\";\nimport * as i3 from \"src/app/services/personel.service\";\nimport * as i4 from \"./../../../../../services/bureau.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\n\nfunction reduireStockComponent_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1, \"Aucunproduit disponible\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction reduireStockComponent_option_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const produit_r12 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", produit_r12.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(produit_r12.id);\n  }\n}\n\nfunction reduireStockComponent_span_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" Entrez le prixAchat \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction reduireStockComponent_span_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" Minimum 4 caract\\u00E8res \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction reduireStockComponent_span_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" Maximum 30 caract\\u00E8res \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction reduireStockComponent_span_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" Entrez le quantite \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction reduireStockComponent_span_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" Minimum 4 caract\\u00E8res \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction reduireStockComponent_span_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" Maximum 30 caract\\u00E8res \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction reduireStockComponent_span_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" Entrez la date \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function () {\n  return [\"../list-stock\"];\n};\n\nconst _c1 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\n\nexport let reduireStockComponent = /*#__PURE__*/(() => {\n  class reduireStockComponent {\n    constructor(stockService, produitService, personelService, bureauService, router) {\n      this.stockService = stockService;\n      this.produitService = produitService;\n      this.personelService = personelService;\n      this.bureauService = bureauService;\n      this.router = router;\n      this.produits = [];\n      this.bureaus = [];\n      this.personels = [];\n      this.stockDto = new StockDto();\n    }\n\n    ngOnInit() {\n      this.getProduits();\n      this.getPersonels();\n      this.getBureaus();\n    } // savestock() {\n    //   const stockData = {\n    //     id: this.stockDto.id,\n    //     quantite: this.stockDto.quantite,\n    //     date: this.stockDto.date,\n    //     prixAchat: this.stockDto.prixAchat, // Conversion si nécessaire\n    //     produitDto: this.stockDto.produitDto,}\n    //     this.stockService.addStock(this.stockDto).subscribe( data =>{\n    //           console.log(data);\n    //           this.goTostockList();\n    //         },\n    //         error => console.log(error));\n    //       }\n    //   this.http.post('http://localhost:8080/api/mvtstks', stockData)\n    //     .subscribe({\n    //       next: (response) => console.log('Stock saved successfully', response),\n    //       error: (error) => console.error('Error saving stock', error)\n    //     });\n    // }\n\n\n    savestock() {\n      this.stockService.reduireStock(this.stockDto).subscribe(data => {\n        console.log(data);\n        this.goTostockList();\n      }, error => console.log(error));\n    }\n\n    goTostockList() {\n      this.router.navigate(['admin/list-stock']);\n    }\n\n    onSubmit() {\n      console.log(this.stockDto);\n      this.savestock(); //  this.produitService.deleteProduit(this.stockDto.produitDto.id);\n      // this.getDeleteProduit();\n    }\n\n    getProduits() {\n      this.produitService.getProduits().subscribe(data => {\n        this.produits = data;\n        console.log(\"Toutes les produits : \", this.produits);\n      });\n    }\n\n    getDeleteProduit() {\n      this.produitService.deleteProduit(this.stockDto.produitDto.id).subscribe(data => {});\n    }\n\n    getPersonels() {\n      this.personelService.getPersonels().subscribe(data => {\n        this.personels = data;\n        console.log(\"Toutes les personels : \", this.personels);\n      });\n    }\n\n    getBureaus() {\n      this.bureauService.getBureaus().subscribe(data => {\n        this.bureaus = data;\n        console.log(\"Toutes les bureaus : \", this.bureaus);\n      });\n    }\n\n  }\n\n  reduireStockComponent.ɵfac = function reduireStockComponent_Factory(t) {\n    return new (t || reduireStockComponent)(i0.ɵɵdirectiveInject(i1.StockService), i0.ɵɵdirectiveInject(i2.ProduitService), i0.ɵɵdirectiveInject(i3.PersonelService), i0.ɵɵdirectiveInject(i4.BureauService), i0.ɵɵdirectiveInject(i5.Router));\n  };\n\n  reduireStockComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: reduireStockComponent,\n    selectors: [[\"app-reduire-stock\"]],\n    decls: 42,\n    vars: 24,\n    consts: [[1, \"card\", \"col-md-4\", \"offset-4\"], [1, \"card-header\", \"text-white\", \"bg-info\", \"d-flex\", \"justify-content-between\"], [1, \"btn\", \"btn-danger\", 3, \"routerLink\"], [1, \"fa\", \"fa-arrow-left\"], [1, \"card-body\"], [3, \"ngSubmit\"], [1, \"mb-3\"], [1, \"form-label\"], [\"name\", \"produits\", \"id\", \"produits\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"placeholder\", \"prixAchat du stock\", \"name\", \"prixAchat\", \"required\", \"\", \"minlength\", \"4\", \"maxlength\", \"30\", 1, \"form-control\", 3, \"ngModel\", \"ngClass\", \"ngModelChange\"], [\"prixAchatVar\", \"ngModel\"], [1, \"invalid-feedback\"], [\"type\", \"number\", \"placeholder\", \"quantite\", \"name\", \"quantite\", \"required\", \"\", \"minlength\", \"1\", \"maxlength\", \"30\", 1, \"form-control\", 3, \"ngModel\", \"ngClass\", \"ngModelChange\"], [\"quantiteVar\", \"ngModel\"], [\"type\", \"date\", \"placeholder\", \"JJ/MM/AAAA\", \"name\", \"date\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngClass\", \"ngModelChange\"], [\"createdAtVar\", \"ngModel\"], [1, \"d-flex\", \"justify-content-end\", \"mt-2\"], [\"type\", \"submit\", 1, \"btn\", \"btn-info\"], [3, \"value\"]],\n    template: function reduireStockComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h4\");\n        i0.ɵɵtext(3, \"Reduire un stock \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"button\", 2);\n        i0.ɵɵelement(5, \"i\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"div\", 4)(7, \"form\", 5);\n        i0.ɵɵlistener(\"ngSubmit\", function reduireStockComponent_Template_form_ngSubmit_7_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(8, \"div\", 6)(9, \"label\", 7);\n        i0.ɵɵtext(10, \"Id produit\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"select\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function reduireStockComponent_Template_select_ngModelChange_11_listener($event) {\n          return ctx.stockDto.produitDto.id = $event;\n        });\n        i0.ɵɵtemplate(12, reduireStockComponent_option_12_Template, 2, 0, \"option\", 9);\n        i0.ɵɵtemplate(13, reduireStockComponent_option_13_Template, 2, 2, \"option\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 6)(15, \"label\");\n        i0.ɵɵtext(16, \"prixAchat\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"input\", 11, 12);\n        i0.ɵɵlistener(\"ngModelChange\", function reduireStockComponent_Template_input_ngModelChange_17_listener($event) {\n          return ctx.stockDto.prixAchat = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 13);\n        i0.ɵɵtemplate(20, reduireStockComponent_span_20_Template, 2, 0, \"span\", 9);\n        i0.ɵɵtemplate(21, reduireStockComponent_span_21_Template, 2, 0, \"span\", 9);\n        i0.ɵɵtemplate(22, reduireStockComponent_span_22_Template, 2, 0, \"span\", 9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"div\", 6)(24, \"label\");\n        i0.ɵɵtext(25, \"Quantite\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"input\", 14, 15);\n        i0.ɵɵlistener(\"ngModelChange\", function reduireStockComponent_Template_input_ngModelChange_26_listener($event) {\n          return ctx.stockDto.quantite = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"div\", 13);\n        i0.ɵɵtemplate(29, reduireStockComponent_span_29_Template, 2, 0, \"span\", 9);\n        i0.ɵɵtemplate(30, reduireStockComponent_span_30_Template, 2, 0, \"span\", 9);\n        i0.ɵɵtemplate(31, reduireStockComponent_span_31_Template, 2, 0, \"span\", 9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(32, \"div\", 6)(33, \"label\");\n        i0.ɵɵtext(34, \"Date \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"input\", 16, 17);\n        i0.ɵɵlistener(\"ngModelChange\", function reduireStockComponent_Template_input_ngModelChange_35_listener($event) {\n          return ctx.stockDto.date = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"div\", 13);\n        i0.ɵɵtemplate(38, reduireStockComponent_span_38_Template, 2, 0, \"span\", 9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(39, \"div\", 18)(40, \"button\", 19);\n        i0.ɵɵtext(41, \"Sauvegarder\");\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        const _r2 = i0.ɵɵreference(18);\n\n        const _r6 = i0.ɵɵreference(27);\n\n        const _r10 = i0.ɵɵreference(36);\n\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(17, _c0));\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.stockDto.produitDto.id);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !(ctx.produits == null ? null : ctx.produits.length));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.produits);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.stockDto.prixAchat)(\"ngClass\", i0.ɵɵpureFunction1(18, _c1, _r2.touched && !_r2.valid));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", _r2.errors == null ? null : _r2.errors[\"required\"]);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", _r2.errors == null ? null : _r2.errors[\"minlength\"]);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", _r2.errors == null ? null : _r2.errors[\"maxlength\"]);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.stockDto.quantite)(\"ngClass\", i0.ɵɵpureFunction1(20, _c1, _r6.touched && !_r6.valid));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", _r6.errors == null ? null : _r6.errors[\"required\"]);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", _r6.errors == null ? null : _r6.errors[\"minlength\"]);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", _r6.errors == null ? null : _r6.errors[\"maxlength\"]);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.stockDto.date)(\"ngClass\", i0.ɵɵpureFunction1(22, _c1, _r10.touched && !_r10.valid));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", _r10.errors == null ? null : _r10.errors[\"required\"]);\n      }\n    },\n    dependencies: [i6.NgClass, i6.NgForOf, i6.NgIf, i5.RouterLink, i7.ɵNgNoValidate, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.DefaultValueAccessor, i7.NumberValueAccessor, i7.SelectControlValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.RequiredValidator, i7.MinLengthValidator, i7.MaxLengthValidator, i7.NgModel, i7.NgForm]\n  });\n  return reduireStockComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}